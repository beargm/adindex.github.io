(function(f,m,r,g){var d="mPageScroll2id",n="mPS2id",o=".m_PageScroll2id,a[rel~='m_PageScroll2id'],.page-scroll-to-id,a[rel~='page-scroll-to-id'],._ps2id",p={scrollSpeed:1000,autoScrollSpeed:true,scrollEasing:"easeInOutQuint",scrollingEasing:"easeOutQuint",pageEndSmoothScroll:true,layout:"vertical",offset:0,highlightSelector:false,clickedClass:n+"-clicked",targetClass:n+"-target",highlightClass:n+"-highlight",forceSingleHighlight:false,keepHighlightUntilNext:false,highlightByNextTarget:false,disablePluginBelow:false,clickEvents:true,appendHash:false,onStart:function(){},onComplete:function(){},defaultSelector:false,live:true,liveSelector:false,excludeSelectors:false,encodeLinks:false},v,c,k,a,w,i,t,u,s,j,b=0,e,h,l={init:function(y){var y=f.extend(true,{},p,y);f(r).data(n,y);c=f(r).data(n);if(!this.selector){var x="__"+n;this.each(function(){var z=f(this);if(!z.hasClass(x)){z.addClass(x)}});this.selector="."+x}if(c.liveSelector){this.selector+=","+c.liveSelector}v=(!v)?this.selector:v+","+this.selector;if(c.defaultSelector){if(typeof f(v)!=="object"||f(v).length===0){v=o}}if(c.clickEvents){f(r).undelegate("."+n).delegate(v,"click."+n,function(z){if(q._isDisabled.call(null)){q._removeClasses.call(null);return}var C=f(this),A=C.attr("href"),B=C.prop("href").baseVal||C.prop("href");if(c.excludeSelectors&&C.is(c.excludeSelectors)){return}if(A&&A.indexOf("#/")!==-1){return}q._reset.call(null);j=C.data("ps2id-offset")||0;if(q._isValid.call(null,A,B)&&q._findTarget.call(null,A)){z.preventDefault();a="selector";w=C;q._setClasses.call(null,true);q._scrollTo.call(null)}})}f(m).unbind("."+n).bind("scroll."+n+" resize."+n,function(){if(q._isDisabled.call(null)){q._removeClasses.call(null);return}var z=f("._"+n+"-t");z.each(function(A){var D=f(this),C=D.attr("id"),B=q._findHighlight.call(null,C);q._setClasses.call(null,false,D,B);if(A==z.length-1){q._extendClasses.call(null)}})});k=true;q._setup.call(null);q._live.call(null)},scrollTo:function(x,y){if(q._isDisabled.call(null)){q._removeClasses.call(null);return}if(x&&typeof x!=="undefined"){q._isInit.call(null);var z={layout:c.layout,offset:c.offset,clicked:false},y=f.extend(true,{},z,y);q._reset.call(null);u=y.layout;s=y.offset;x=(x.indexOf("#")!==-1)?x:"#"+x;if(q._isValid.call(null,x)&&q._findTarget.call(null,x)){a="scrollTo";w=y.clicked;if(w){q._setClasses.call(null,true)}q._scrollTo.call(null)}}},destroy:function(){f(m).unbind("."+n);f(r).undelegate("."+n).removeData(n);f("._"+n+"-t").removeData(n);q._removeClasses.call(null,true)}},q={_isDisabled:function(){var z=m,y="inner",x=c.disablePluginBelow instanceof Array?[c.disablePluginBelow[0]||0,c.disablePluginBelow[1]||0]:[c.disablePluginBelow||0,0];if(!("innerWidth" in m)){y="client";z=r.documentElement||r.body}return z[y+"Width"]<=x[0]||z[y+"Height"]<=x[1]},_isValid:function(x,y){if(!x){return}y=(!y)?x:y;var A=(y.indexOf("#/")!==-1)?y.split("#/")[0]:y.split("#")[0],z=m.location.toString().split("#")[0];return x!=="#"&&x.indexOf("#")!==-1&&(A===""||decodeURIComponent(A)===decodeURIComponent(z))},_setup:function(){var z=q._highlightSelector(),y=1,x=0;return f(z).each(function(){var C=f(this),F=C.attr("href"),E=C.prop("href").baseVal||C.prop("href");if(q._isValid.call(null,F,E)){if(c.excludeSelectors&&C.is(c.excludeSelectors)){return}var D=(F.indexOf("#/")!==-1)?F.split("#/")[1]:F.split("#")[1],A=D.indexOf("%")!==-1?f(r.getElementById(D)):f("#"+D);if(A.length>0){if(c.highlightByNextTarget){if(A!==x){if(!x){A.data(n,{tn:"0"})}else{x.data(n,{tn:A})}x=A}}if(!A.hasClass("_"+n+"-t")){A.addClass("_"+n+"-t")}A.data(n,{i:y});if(!C.hasClass("_"+n+"-h")){C.addClass("_"+n+"-h")}var B=q._findHighlight.call(null,D);q._setClasses.call(null,false,A,B);b=y;y++;if(y==f(z).length){q._extendClasses.call(null)}}}})},_highlightSelector:function(){return(c.highlightSelector&&c.highlightSelector!=="")?c.highlightSelector:v},_findTarget:function(x){var z=(x.indexOf("#/")!==-1)?x.split("#/")[1]:x.split("#")[1],y=z.indexOf("%")!==-1?f(r.getElementById(z)):f("#"+z);if(y.length<1||y.css("position")==="fixed"){if(z==="top"){y=f("body")}else{return}}i=y;if(!u){u=c.layout}s=q._setOffset.call(null);t=[(y.offset().top-s[0]).toString(),(y.offset().left-s[1]).toString()];t[0]=(t[0]<0)?0:t[0];t[1]=(t[1]<0)?0:t[1];return t},_setOffset:function(){if(!s){s=(c.offset)?c.offset:0}if(j){s=j}var z,y,A,x;switch(typeof s){case"object":case"string":z=[(s.y)?s.y:s,(s.x)?s.x:s];y=[(z[0] instanceof jQuery)?z[0]:f(z[0]),(z[1] instanceof jQuery)?z[1]:f(z[1])];if(y[0].length>0){A=y[0].height();if(y[0].css("position")==="fixed"){A+=y[0][0].offsetTop}}else{if(!isNaN(parseFloat(z[0]))&&isFinite(z[0])){A=parseInt(z[0])}else{A=0}}if(y[1].length>0){x=y[1].width();if(y[1].css("position")==="fixed"){x+=y[1][0].offsetLeft}}else{if(!isNaN(parseFloat(z[1]))&&isFinite(z[1])){x=parseInt(z[1])}else{x=0}}break;case"function":z=s.call(null);if(z instanceof Array){A=z[0];x=z[1]}else{A=x=z}break;default:A=x=parseInt(s)}return[A,x]},_findHighlight:function(B){var x=m.location,z=x.toString().split("#")[0],C=x.pathname;if(z.indexOf("'")!==-1){z=z.replace("'","\\'")}if(C.indexOf("'")!==-1){C=C.replace("'","\\'")}z=decodeURIComponent(z);C=decodeURIComponent(C);if(c.encodeLinks){var y=encodeURI(z).toLowerCase(),A=encodeURI(C).toLowerCase();return f("._"+n+"-h[href='#"+B+"'],._"+n+"-h[href='"+z+"#"+B+"'],._"+n+"-h[href='"+C+"#"+B+"'],._"+n+"-h[href='#/"+B+"'],._"+n+"-h[href='"+z+"#/"+B+"'],._"+n+"-h[href='"+C+"#/"+B+"'],._"+n+"-h[href='"+y+"#/"+B+"'],._"+n+"-h[href='"+y+"#"+B+"'],._"+n+"-h[href='"+A+"#/"+B+"'],._"+n+"-h[href='"+A+"#"+B+"']")}else{return f("._"+n+"-h[href='#"+B+"'],._"+n+"-h[href='"+z+"#"+B+"'],._"+n+"-h[href='"+C+"#"+B+"'],._"+n+"-h[href='#/"+B+"'],._"+n+"-h[href='"+z+"#/"+B+"'],._"+n+"-h[href='"+C+"#/"+B+"']")}},_setClasses:function(B,z,C){var A=c.clickedClass,x=c.targetClass,y=c.highlightClass;if(B&&A&&A!==""){f("."+A).removeClass(A);w.addClass(A)}else{if(z&&x&&x!==""&&C&&y&&y!==""){if(q._currentTarget.call(null,z)){z.addClass(x);C.addClass(y)}else{if(!c.keepHighlightUntilNext||f("."+y).length>1){z.removeClass(x);C.removeClass(y)}}}}},_extendClasses:function(){var x=c.targetClass,B=c.highlightClass,E=f("."+x),z=f("."+B),D=x+"-first",y=x+"-last",C=B+"-first",A=B+"-last";f("._"+n+"-t").removeClass(D+" "+y);f("._"+n+"-h").removeClass(C+" "+A);if(!c.forceSingleHighlight){E.slice(0,1).addClass(D).end().slice(-1).addClass(y);z.slice(0,1).addClass(C).end().slice(-1).addClass(A)}else{if(c.keepHighlightUntilNext&&E.length>1){E.slice(0,1).removeClass(x);z.slice(0,1).removeClass(B)}else{E.slice(1).removeClass(x);z.slice(1).removeClass(B)}}},_removeClasses:function(x){f("."+c.clickedClass).removeClass(c.clickedClass);f("."+c.targetClass).removeClass(c.targetClass+" "+c.targetClass+"-first "+c.targetClass+"-last");f("."+c.highlightClass).removeClass(c.highlightClass+" "+c.highlightClass+"-first "+c.highlightClass+"-last");if(x){f("._"+n+"-t").removeClass("_"+n+"-t");f("._"+n+"-h").removeClass("_"+n+"-h")}},_currentTarget:function(L){var O=c["target_"+L.data(n).i],B=L.data("ps2id-target"),y=B&&f(B)[0]?f(B)[0].getBoundingClientRect():L[0].getBoundingClientRect();if(typeof O!=="undefined"){var J=L.offset().top,K=L.offset().left,P=(O.from)?O.from+J:J,z=(O.to)?O.to+J:J,M=(O.fromX)?O.fromX+K:K,x=(O.toX)?O.toX+K:K;return(y.top>=z&&y.top<=P&&y.left>=x&&y.left<=M)}else{var G=f(m).height(),S=f(m).width(),E=B?f(B).height():L.height(),R=B?f(B).width():L.width(),D=1+(E/G),N=D,H=(E<G)?D*(G/E):D,I=1+(R/S),C=I,Q=(R<S)?I*(S/R):I,T=[y.top<=G/N,y.bottom>=G/H,y.left<=S/C,y.right>=S/Q];if(c.highlightByNextTarget){var A=L.data(n).tn;if(A){var F=A[0].getBoundingClientRect();if(c.layout==="vertical"){T=[y.top<=G/2,F.top>G/2,1,1]}else{if(c.layout==="horizontal"){T=[1,1,y.left<=S/2,F.left>S/2]}}}}return(T[0]&&T[1]&&T[2]&&T[3])}},_scrollTo:function(){h=q._scrollSpeed.call(null);t=(c.pageEndSmoothScroll)?q._pageEndSmoothScroll.call(null):t;var x=f("html,body"),y=(c.autoScrollSpeed)?q._autoScrollSpeed.call(null):h,B=(x.is(":animated"))?c.scrollingEasing:c.scrollEasing,C=f(m).scrollTop(),z=f(m).scrollLeft();switch(u){case"horizontal":if(z!=t[1]){q._callbacks.call(null,"onStart");x.stop().animate({scrollLeft:t[1]},y,B).promise().then(function(){q._callbacks.call(null,"onComplete")})}break;case"auto":if(C!=t[0]||z!=t[1]){q._callbacks.call(null,"onStart");if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){var A;x.stop().animate({pageYOffset:t[0],pageXOffset:t[1]},{duration:y,easing:B,step:function(D,E){if(E.prop=="pageXOffset"){A=D}else{if(E.prop=="pageYOffset"){m.scrollTo(A,D)}}}}).promise().then(function(){q._callbacks.call(null,"onComplete")})}else{x.stop().animate({scrollTop:t[0],scrollLeft:t[1]},y,B).promise().then(function(){q._callbacks.call(null,"onComplete")})}}break;default:if(C!=t[0]){q._callbacks.call(null,"onStart");x.stop().animate({scrollTop:t[0]},y,B).promise().then(function(){q._callbacks.call(null,"onComplete")})}}},_pageEndSmoothScroll:function(){var x=f(r).height(),y=f(r).width(),A=f(m).height(),z=f(m).width();return[((x-t[0])<A)?x-A:t[0],((y-t[1])<z)?y-z:t[1]]},_scrollSpeed:function(){var x=c.scrollSpeed;if(w&&w.length){w.add(w.parent()).each(function(){var y=f(this);if(y.attr("class")){var A=y.attr("class").split(" ");for(var z in A){if(String(A[z]).match(/^ps2id-speed-\d+$/)){x=A[z].split("ps2id-speed-")[1];break}}}})}return parseInt(x)},_autoScrollSpeed:function(){var B=f(m).scrollTop(),z=f(m).scrollLeft(),x=f(r).height(),y=f(r).width(),A=[h+((h*(Math.floor((Math.abs(t[0]-B)/x)*100)))/100),h+((h*(Math.floor((Math.abs(t[1]-z)/y)*100)))/100)];return Math.max.apply(Math,A)},_callbacks:function(x){if(!c){return}this[n]={trigger:a,clicked:w,target:i,scrollTo:{y:t[0],x:t[1]}};switch(x){case"onStart":if(c.appendHash&&m.history&&m.history.pushState&&w&&w.length){var y="#"+w.attr("href").split("#")[1];if(y!==m.location.hash){history.pushState("","",y)}}c.onStart.call(null,this[n]);break;case"onComplete":c.onComplete.call(null,this[n]);break}},_reset:function(){u=s=j=false},_isInit:function(){if(!k){l.init.apply(this)}},_live:function(){e=setTimeout(function(){if(c.live){if(f(q._highlightSelector()).length!==b){q._setup.call(null)}}else{if(e){clearTimeout(e)}}q._live.call(null)},1000)},_easing:function(){f.easing.easeInQuad=f.easing.easeInQuad||function(y){return y*y};f.easing.easeOutQuad=f.easing.easeOutQuad||function(y){return 1-(1-y)*(1-y)};f.easing.easeInOutQuad=f.easing.easeInOutQuad||function(y){return y<0.5?2*y*y:1-Math.pow(-2*y+2,2)/2};f.easing.easeInCubic=f.easing.easeInCubic||function(y){return y*y*y};f.easing.easeOutCubic=f.easing.easeOutCubic||function(y){return 1-Math.pow(1-y,3)};f.easing.easeInOutCubic=f.easing.easeInOutCubic||function(y){return y<0.5?4*y*y*y:1-Math.pow(-2*y+2,3)/2};f.easing.easeInQuart=f.easing.easeInQuart||function(y){return y*y*y*y};f.easing.easeOutQuart=f.easing.easeOutQuart||function(y){return 1-Math.pow(1-y,4)};f.easing.easeInOutQuart=f.easing.easeInOutQuart||function(y){return y<0.5?8*y*y*y*y:1-Math.pow(-2*y+2,4)/2};f.easing.easeInQuint=f.easing.easeInQuint||function(y){return y*y*y*y*y};f.easing.easeOutQuint=f.easing.easeOutQuint||function(y){return 1-Math.pow(1-y,5)};f.easing.easeInOutQuint=f.easing.easeInOutQuint||function(y){return y<0.5?16*y*y*y*y*y:1-Math.pow(-2*y+2,5)/2};f.easing.easeInExpo=f.easing.easeInExpo||function(y){return y===0?0:Math.pow(2,10*y-10)};f.easing.easeOutExpo=f.easing.easeOutExpo||function(y){return y===1?1:1-Math.pow(2,-10*y)};f.easing.easeInOutExpo=f.easing.easeInOutExpo||function(y){return y===0?0:y===1?1:y<0.5?Math.pow(2,20*y-10)/2:(2-Math.pow(2,-20*y+10))/2};f.easing.easeInSine=f.easing.easeInSine||function(y){return 1-Math.cos(y*Math.PI/2)};f.easing.easeOutSine=f.easing.easeOutSine||function(y){return Math.sin(y*Math.PI/2)};f.easing.easeInOutSine=f.easing.easeInOutSine||function(y){return -(Math.cos(Math.PI*y)-1)/2};f.easing.easeInCirc=f.easing.easeInCirc||function(y){return 1-Math.sqrt(1-Math.pow(y,2))};f.easing.easeOutCirc=f.easing.easeOutCirc||function(y){return Math.sqrt(1-Math.pow(y-1,2))};f.easing.easeInOutCirc=f.easing.easeInOutCirc||function(y){return y<0.5?(1-Math.sqrt(1-Math.pow(2*y,2)))/2:(Math.sqrt(1-Math.pow(-2*y+2,2))+1)/2};f.easing.easeInElastic=f.easing.easeInElastic||function(y){return y===0?0:y===1?1:-Math.pow(2,10*y-10)*Math.sin((y*10-10.75)*((2*Math.PI)/3))};f.easing.easeOutElastic=f.easing.easeOutElastic||function(y){return y===0?0:y===1?1:Math.pow(2,-10*y)*Math.sin((y*10-0.75)*((2*Math.PI)/3))+1};f.easing.easeInOutElastic=f.easing.easeInOutElastic||function(y){return y===0?0:y===1?1:y<0.5?-(Math.pow(2,20*y-10)*Math.sin((20*y-11.125)*((2*Math.PI)/4.5)))/2:Math.pow(2,-20*y+10)*Math.sin((20*y-11.125)*((2*Math.PI)/4.5))/2+1};f.easing.easeInBack=f.easing.easeInBack||function(y){return(1.70158+1)*y*y*y-1.70158*y*y};f.easing.easeOutBack=f.easing.easeOutBack||function(y){return 1+(1.70158+1)*Math.pow(y-1,3)+1.70158*Math.pow(y-1,2)};f.easing.easeInOutBack=f.easing.easeInOutBack||function(y){return y<0.5?(Math.pow(2*y,2)*(((1.70158*1.525)+1)*2*y-(1.70158*1.525)))/2:(Math.pow(2*y-2,2)*(((1.70158*1.525)+1)*(y*2-2)+(1.70158*1.525))+2)/2};f.easing.easeInBounce=f.easing.easeInBounce||function(y){return 1-x(1-y)};f.easing.easeOutBounce=f.easing.easeOutBounce||x;f.easing.easeInOutBounce=f.easing.easeInOutBounce||function(y){return y<0.5?(1-x(1-2*y))/2:(1+x(2*y-1))/2};function x(z){var A=7.5625,y=2.75;if(z<1/y){return A*z*z}else{if(z<2/y){return A*(z-=(1.5/y))*z+0.75}else{if(z<2.5/y){return A*(z-=(2.25/y))*z+0.9375}else{return A*(z-=(2.625/y))*z+0.984375}}}}}};q._easing.call();f.fn[d]=function(x){if(l[x]){return l[x].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof x==="object"||!x){return l.init.apply(this,arguments)}else{f.error("Method "+x+" does not exist")}}};f[d]=function(x){if(l[x]){return l[x].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof x==="object"||!x){return l.init.apply(this,arguments)}else{f.error("Method "+x+" does not exist")}}};f[d].defaults=p})(jQuery,window,document);