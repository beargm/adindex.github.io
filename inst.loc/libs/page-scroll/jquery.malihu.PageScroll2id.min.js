(function(f,k,o,g){var d="mPageScroll2id",l="mPS2id",w=".m_PageScroll2id,a[rel~='m_PageScroll2id'],.page-scroll-to-id,a[rel~='page-scroll-to-id'],._ps2id",m={scrollSpeed:1000,autoScrollSpeed:true,scrollEasing:"easeInOutQuint",scrollingEasing:"easeOutQuint",pageEndSmoothScroll:true,layout:"vertical",offset:0,highlightSelector:false,clickedClass:l+"-clicked",targetClass:l+"-target",highlightClass:l+"-highlight",forceSingleHighlight:false,keepHighlightUntilNext:false,highlightByNextTarget:false,disablePluginBelow:false,clickEvents:true,appendHash:false,onStart:function(){},onComplete:function(){},defaultSelector:false,live:true,liveSelector:false,excludeSelectors:false,encodeLinks:false},s,c,j,a,t,i,q,r,p,u,b=0,e,h,v={init:function(x){var x=f.extend(true,{},m,x);f(o).data(l,x);c=f(o).data(l);if(!this.selector){var y="__"+l;this.each(function(){var z=f(this);if(!z.hasClass(y)){z.addClass(y)}});this.selector="."+y}if(c.liveSelector){this.selector+=","+c.liveSelector}s=(!s)?this.selector:s+","+this.selector;if(c.defaultSelector){if(typeof f(s)!=="object"||f(s).length===0){s=w}}if(c.clickEvents){f(o).undelegate("."+l).delegate(s,"click."+l,function(B){if(n._isDisabled.call(null)){n._removeClasses.call(null);return}var A=f(this),z=A.attr("href"),C=A.prop("href").baseVal||A.prop("href");if(c.excludeSelectors&&A.is(c.excludeSelectors)){return}if(z&&z.indexOf("#/")!==-1){return}n._reset.call(null);u=A.data("ps2id-offset")||0;if(n._isValid.call(null,z,C)&&n._findTarget.call(null,z)){B.preventDefault();a="selector";t=A;n._setClasses.call(null,true);n._scrollTo.call(null)}})}f(k).unbind("."+l).bind("scroll."+l+" resize."+l,function(){if(n._isDisabled.call(null)){n._removeClasses.call(null);return}var z=f("._"+l+"-t");z.each(function(B){var A=f(this),D=A.attr("id"),C=n._findHighlight.call(null,D);n._setClasses.call(null,false,A,C);if(B==z.length-1){n._extendClasses.call(null)}})});j=true;n._setup.call(null);n._live.call(null)},scrollTo:function(z,x){if(n._isDisabled.call(null)){n._removeClasses.call(null);return}if(z&&typeof z!=="undefined"){n._isInit.call(null);var y={layout:c.layout,offset:c.offset,clicked:false},x=f.extend(true,{},y,x);n._reset.call(null);r=x.layout;p=x.offset;z=(z.indexOf("#")!==-1)?z:"#"+z;if(n._isValid.call(null,z)&&n._findTarget.call(null,z)){a="scrollTo";t=x.clicked;if(t){n._setClasses.call(null,true)}n._scrollTo.call(null)}}},destroy:function(){f(k).unbind("."+l);f(o).undelegate("."+l).removeData(l);f("._"+l+"-t").removeData(l);n._removeClasses.call(null,true)}},n={_isDisabled:function(){var y=k,x="inner",z=c.disablePluginBelow instanceof Array?[c.disablePluginBelow[0]||0,c.disablePluginBelow[1]||0]:[c.disablePluginBelow||0,0];if(!("innerWidth" in k)){x="client";y=o.documentElement||o.body}return y[x+"Width"]<=z[0]||y[x+"Height"]<=z[1]},_isValid:function(x,A){if(!x){return}A=(!A)?x:A;var z=(A.indexOf("#/")!==-1)?A.split("#/")[0]:A.split("#")[0],y=k.location.toString().split("#")[0];return x!=="#"&&x.indexOf("#")!==-1&&(z===""||decodeURIComponent(z)===decodeURIComponent(y))},_setup:function(){var y=n._highlightSelector(),x=1,z=0;return f(y).each(function(){var D=f(this),A=D.attr("href"),F=D.prop("href").baseVal||D.prop("href");if(n._isValid.call(null,A,F)){if(c.excludeSelectors&&D.is(c.excludeSelectors)){return}var E=(A.indexOf("#/")!==-1)?A.split("#/")[1]:A.split("#")[1],B=E.indexOf("%")!==-1?f(o.getElementById(E)):f("#"+E);if(B.length>0){if(c.highlightByNextTarget){if(B!==z){if(!z){B.data(l,{tn:"0"})}else{z.data(l,{tn:B})}z=B}}if(!B.hasClass("_"+l+"-t")){B.addClass("_"+l+"-t")}B.data(l,{i:x});if(!D.hasClass("_"+l+"-h")){D.addClass("_"+l+"-h")}var C=n._findHighlight.call(null,E);n._setClasses.call(null,false,B,C);b=x;x++;if(x==f(y).length){n._extendClasses.call(null)}}}})},_highlightSelector:function(){return(c.highlightSelector&&c.highlightSelector!=="")?c.highlightSelector:s},_findTarget:function(z){var y=(z.indexOf("#/")!==-1)?z.split("#/")[1]:z.split("#")[1],x=y.indexOf("%")!==-1?f(o.getElementById(y)):f("#"+y);if(x.length<1||x.css("position")==="fixed"){if(y==="top"){x=f("body")}else{return}}i=x;if(!r){r=c.layout}p=n._setOffset.call(null);q=[(x.offset().top-p[0]).toString(),(x.offset().left-p[1]).toString()];q[0]=(q[0]<0)?0:q[0];q[1]=(q[1]<0)?0:q[1];return q},_setOffset:function(){if(!p){p=(c.offset)?c.offset:0}if(u){p=u}var B,A,C,z;switch(typeof p){case"object":case"string":B=[(p.y)?p.y:p,(p.x)?p.x:p];A=[(B[0] instanceof jQuery)?B[0]:f(B[0]),(B[1] instanceof jQuery)?B[1]:f(B[1])];if(A[0].length>0){C=A[0].height();if(A[0].css("position")==="fixed"){C+=A[0][0].offsetTop}}else{if(!isNaN(parseFloat(B[0]))&&isFinite(B[0])){C=parseInt(B[0])}else{C=0}}if(A[1].length>0){z=A[1].width();if(A[1].css("position")==="fixed"){z+=A[1][0].offsetLeft}}else{if(!isNaN(parseFloat(B[1]))&&isFinite(B[1])){z=parseInt(B[1])}else{z=0}}break;case"function":B=p.call(null);if(B instanceof Array){C=B[0];z=B[1]}else{C=z=B}break;default:C=z=parseInt(p)}return[C,z]},_findHighlight:function(C){var x=k.location,B=x.toString().split("#")[0],z=x.pathname;if(B.indexOf("'")!==-1){B=B.replace("'","\\'")}if(z.indexOf("'")!==-1){z=z.replace("'","\\'")}B=decodeURIComponent(B);z=decodeURIComponent(z);if(c.encodeLinks){var A=encodeURI(B).toLowerCase(),y=encodeURI(z).toLowerCase();return f("._"+l+"-h[href='#"+C+"'],._"+l+"-h[href='"+B+"#"+C+"'],._"+l+"-h[href='"+z+"#"+C+"'],._"+l+"-h[href='#/"+C+"'],._"+l+"-h[href='"+B+"#/"+C+"'],._"+l+"-h[href='"+z+"#/"+C+"'],._"+l+"-h[href='"+A+"#/"+C+"'],._"+l+"-h[href='"+A+"#"+C+"'],._"+l+"-h[href='"+y+"#/"+C+"'],._"+l+"-h[href='"+y+"#"+C+"']")}else{return f("._"+l+"-h[href='#"+C+"'],._"+l+"-h[href='"+B+"#"+C+"'],._"+l+"-h[href='"+z+"#"+C+"'],._"+l+"-h[href='#/"+C+"'],._"+l+"-h[href='"+B+"#/"+C+"'],._"+l+"-h[href='"+z+"#/"+C+"']")}},_setClasses:function(C,y,z){var B=c.clickedClass,x=c.targetClass,A=c.highlightClass;if(C&&B&&B!==""){f("."+B).removeClass(B);t.addClass(B)}else{if(y&&x&&x!==""&&z&&A&&A!==""){if(n._currentTarget.call(null,y)){y.addClass(x);z.addClass(A)}else{if(!c.keepHighlightUntilNext||f("."+A).length>1){y.removeClass(x);z.removeClass(A)}}}}},_extendClasses:function(){var x=c.targetClass,C=c.highlightClass,E=f("."+x),B=f("."+C),D=x+"-first",A=x+"-last",z=C+"-first",y=C+"-last";f("._"+l+"-t").removeClass(D+" "+A);f("._"+l+"-h").removeClass(z+" "+y);if(!c.forceSingleHighlight){E.slice(0,1).addClass(D).end().slice(-1).addClass(A);B.slice(0,1).addClass(z).end().slice(-1).addClass(y)}else{if(c.keepHighlightUntilNext&&E.length>1){E.slice(0,1).removeClass(x);B.slice(0,1).removeClass(C)}else{E.slice(1).removeClass(x);B.slice(1).removeClass(C)}}},_removeClasses:function(x){f("."+c.clickedClass).removeClass(c.clickedClass);f("."+c.targetClass).removeClass(c.targetClass+" "+c.targetClass+"-first "+c.targetClass+"-last");f("."+c.highlightClass).removeClass(c.highlightClass+" "+c.highlightClass+"-first "+c.highlightClass+"-last");if(x){f("._"+l+"-t").removeClass("_"+l+"-t");f("._"+l+"-h").removeClass("_"+l+"-h")}},_currentTarget:function(N){var Q=c["target_"+N.data(l).i],E=N.data("ps2id-target"),B=E&&f(E)[0]?f(E)[0].getBoundingClientRect():N[0].getBoundingClientRect();if(typeof Q!=="undefined"){var L=N.offset().top,M=N.offset().left,R=(Q.from)?Q.from+L:L,C=(Q.to)?Q.to+L:L,O=(Q.fromX)?Q.fromX+M:M,A=(Q.toX)?Q.toX+M:M;return(B.top>=C&&B.top<=R&&B.left>=A&&B.left<=O)}else{var J=f(k).height(),U=f(k).width(),H=E?f(E).height():N.height(),T=E?f(E).width():N.width(),G=1+(H/J),P=G,K=(H<J)?G*(J/H):G,z=1+(T/U),F=z,S=(T<U)?z*(U/T):z,V=[B.top<=J/P,B.bottom>=J/K,B.left<=U/F,B.right>=U/S];if(c.highlightByNextTarget){var D=N.data(l).tn;if(D){var I=D[0].getBoundingClientRect();if(c.layout==="vertical"){V=[B.top<=J/2,I.top>J/2,1,1]}else{if(c.layout==="horizontal"){V=[1,1,B.left<=U/2,I.left>U/2]}}}}return(V[0]&&V[1]&&V[2]&&V[3])}},_scrollTo:function(){h=n._scrollSpeed.call(null);q=(c.pageEndSmoothScroll)?n._pageEndSmoothScroll.call(null):q;var x=f("html,body"),A=(c.autoScrollSpeed)?n._autoScrollSpeed.call(null):h,C=(x.is(":animated"))?c.scrollingEasing:c.scrollEasing,z=f(k).scrollTop(),y=f(k).scrollLeft();switch(r){case"horizontal":if(y!=q[1]){n._callbacks.call(null,"onStart");x.stop().animate({scrollLeft:q[1]},A,C).promise().then(function(){n._callbacks.call(null,"onComplete")})}break;case"auto":if(z!=q[0]||y!=q[1]){n._callbacks.call(null,"onStart");if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){var B;x.stop().animate({pageYOffset:q[0],pageXOffset:q[1]},{duration:A,easing:C,step:function(D,E){if(E.prop=="pageXOffset"){B=D}else{if(E.prop=="pageYOffset"){k.scrollTo(B,D)}}}}).promise().then(function(){n._callbacks.call(null,"onComplete")})}else{x.stop().animate({scrollTop:q[0],scrollLeft:q[1]},A,C).promise().then(function(){n._callbacks.call(null,"onComplete")})}}break;default:if(z!=q[0]){n._callbacks.call(null,"onStart");x.stop().animate({scrollTop:q[0]},A,C).promise().then(function(){n._callbacks.call(null,"onComplete")})}}},_pageEndSmoothScroll:function(){var x=f(o).height(),A=f(o).width(),z=f(k).height(),y=f(k).width();return[((x-q[0])<z)?x-z:q[0],((A-q[1])<y)?A-y:q[1]]},_scrollSpeed:function(){var x=c.scrollSpeed;if(t&&t.length){t.add(t.parent()).each(function(){var A=f(this);if(A.attr("class")){var z=A.attr("class").split(" ");for(var y in z){if(String(z[y]).match(/^ps2id-speed-\d+$/)){x=z[y].split("ps2id-speed-")[1];break}}}})}return parseInt(x)},_autoScrollSpeed:function(){var z=f(k).scrollTop(),y=f(k).scrollLeft(),A=f(o).height(),x=f(o).width(),B=[h+((h*(Math.floor((Math.abs(q[0]-z)/A)*100)))/100),h+((h*(Math.floor((Math.abs(q[1]-y)/x)*100)))/100)];return Math.max.apply(Math,B)},_callbacks:function(y){if(!c){return}this[l]={trigger:a,clicked:t,target:i,scrollTo:{y:q[0],x:q[1]}};switch(y){case"onStart":if(c.appendHash&&k.history&&k.history.pushState&&t&&t.length){var x="#"+t.attr("href").split("#")[1];if(x!==k.location.hash){history.pushState("","",x)}}c.onStart.call(null,this[l]);break;case"onComplete":c.onComplete.call(null,this[l]);break}},_reset:function(){r=p=u=false},_isInit:function(){if(!j){v.init.apply(this)}},_live:function(){e=setTimeout(function(){if(c.live){if(f(n._highlightSelector()).length!==b){n._setup.call(null)}}else{if(e){clearTimeout(e)}}n._live.call(null)},1000)},_easing:function(){f.easing.easeInQuad=f.easing.easeInQuad||function(y){return y*y};f.easing.easeOutQuad=f.easing.easeOutQuad||function(y){return 1-(1-y)*(1-y)};f.easing.easeInOutQuad=f.easing.easeInOutQuad||function(y){return y<0.5?2*y*y:1-Math.pow(-2*y+2,2)/2};f.easing.easeInCubic=f.easing.easeInCubic||function(y){return y*y*y};f.easing.easeOutCubic=f.easing.easeOutCubic||function(y){return 1-Math.pow(1-y,3)};f.easing.easeInOutCubic=f.easing.easeInOutCubic||function(y){return y<0.5?4*y*y*y:1-Math.pow(-2*y+2,3)/2};f.easing.easeInQuart=f.easing.easeInQuart||function(y){return y*y*y*y};f.easing.easeOutQuart=f.easing.easeOutQuart||function(y){return 1-Math.pow(1-y,4)};f.easing.easeInOutQuart=f.easing.easeInOutQuart||function(y){return y<0.5?8*y*y*y*y:1-Math.pow(-2*y+2,4)/2};f.easing.easeInQuint=f.easing.easeInQuint||function(y){return y*y*y*y*y};f.easing.easeOutQuint=f.easing.easeOutQuint||function(y){return 1-Math.pow(1-y,5)};f.easing.easeInOutQuint=f.easing.easeInOutQuint||function(y){return y<0.5?16*y*y*y*y*y:1-Math.pow(-2*y+2,5)/2};f.easing.easeInExpo=f.easing.easeInExpo||function(y){return y===0?0:Math.pow(2,10*y-10)};f.easing.easeOutExpo=f.easing.easeOutExpo||function(y){return y===1?1:1-Math.pow(2,-10*y)};f.easing.easeInOutExpo=f.easing.easeInOutExpo||function(y){return y===0?0:y===1?1:y<0.5?Math.pow(2,20*y-10)/2:(2-Math.pow(2,-20*y+10))/2};f.easing.easeInSine=f.easing.easeInSine||function(y){return 1-Math.cos(y*Math.PI/2)};f.easing.easeOutSine=f.easing.easeOutSine||function(y){return Math.sin(y*Math.PI/2)};f.easing.easeInOutSine=f.easing.easeInOutSine||function(y){return -(Math.cos(Math.PI*y)-1)/2};f.easing.easeInCirc=f.easing.easeInCirc||function(y){return 1-Math.sqrt(1-Math.pow(y,2))};f.easing.easeOutCirc=f.easing.easeOutCirc||function(y){return Math.sqrt(1-Math.pow(y-1,2))};f.easing.easeInOutCirc=f.easing.easeInOutCirc||function(y){return y<0.5?(1-Math.sqrt(1-Math.pow(2*y,2)))/2:(Math.sqrt(1-Math.pow(-2*y+2,2))+1)/2};f.easing.easeInElastic=f.easing.easeInElastic||function(y){return y===0?0:y===1?1:-Math.pow(2,10*y-10)*Math.sin((y*10-10.75)*((2*Math.PI)/3))};f.easing.easeOutElastic=f.easing.easeOutElastic||function(y){return y===0?0:y===1?1:Math.pow(2,-10*y)*Math.sin((y*10-0.75)*((2*Math.PI)/3))+1};f.easing.easeInOutElastic=f.easing.easeInOutElastic||function(y){return y===0?0:y===1?1:y<0.5?-(Math.pow(2,20*y-10)*Math.sin((20*y-11.125)*((2*Math.PI)/4.5)))/2:Math.pow(2,-20*y+10)*Math.sin((20*y-11.125)*((2*Math.PI)/4.5))/2+1};f.easing.easeInBack=f.easing.easeInBack||function(y){return(1.70158+1)*y*y*y-1.70158*y*y};f.easing.easeOutBack=f.easing.easeOutBack||function(y){return 1+(1.70158+1)*Math.pow(y-1,3)+1.70158*Math.pow(y-1,2)};f.easing.easeInOutBack=f.easing.easeInOutBack||function(y){return y<0.5?(Math.pow(2*y,2)*(((1.70158*1.525)+1)*2*y-(1.70158*1.525)))/2:(Math.pow(2*y-2,2)*(((1.70158*1.525)+1)*(y*2-2)+(1.70158*1.525))+2)/2};f.easing.easeInBounce=f.easing.easeInBounce||function(y){return 1-x(1-y)};f.easing.easeOutBounce=f.easing.easeOutBounce||x;f.easing.easeInOutBounce=f.easing.easeInOutBounce||function(y){return y<0.5?(1-x(1-2*y))/2:(1+x(2*y-1))/2};function x(y){var z=7.5625,A=2.75;if(y<1/A){return z*y*y}else{if(y<2/A){return z*(y-=(1.5/A))*y+0.75}else{if(y<2.5/A){return z*(y-=(2.25/A))*y+0.9375}else{return z*(y-=(2.625/A))*y+0.984375}}}}}};n._easing.call();f.fn[d]=function(x){if(v[x]){return v[x].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof x==="object"||!x){return v.init.apply(this,arguments)}else{f.error("Method "+x+" does not exist")}}};f[d]=function(x){if(v[x]){return v[x].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof x==="object"||!x){return v.init.apply(this,arguments)}else{f.error("Method "+x+" does not exist")}}};f[d].defaults=m})(jQuery,window,document);